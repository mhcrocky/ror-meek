import memoize from 'memoize-one'; // create a set of handlers with a stable identity so as not to
// thwart SCU checks

export default function createEventHandler(getHandler) {
  var getter = memoize(getHandler);
  var handlers = {};
  return function (events) {
    var newHandlers = {};

    if (events) {
      for (var _iterator = [].concat(events), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var event = _ref;
        newHandlers[event] = handlers[event] || getter(event);
      }
    }

    return handlers = newHandlers;
  };
}